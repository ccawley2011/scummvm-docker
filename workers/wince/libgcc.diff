diff --git a/libgcc/config.host b/libgcc/config.host
index 676c78fcf7a..99516658921 100644
--- a/libgcc/config.host
+++ b/libgcc/config.host
@@ -441,7 +441,11 @@ arm*-*-eabi* | arm*-*-symbianelf* | arm*-*-rtems*)
 arm*-*-mingw32ce* | arm*-*-cegcc*)
 	extra_parts="crtbegin.o crtend.o"
 	tmake_file="$tmake_file arm/t-wince-pe"
-	tmake_file="$tmake_file i386/t-gthr-win32"
+	case ${target_thread_file} in
+	  win32)
+	    tmake_file="$tmake_file i386/t-gthr-win32"
+	    ;;
+	esac
 	;;
 avr-*-*)
 	# Make HImode functions for AVR
diff --git a/libgcc/config/arm/t-wince-pe b/libgcc/config/arm/t-wince-pe
index 606873e4f4b..a82b28feb3e 100644
--- a/libgcc/config/arm/t-wince-pe
+++ b/libgcc/config/arm/t-wince-pe
@@ -1,3 +1,8 @@
+# If we are building next to winsup, this will let us find the real
+# limits.h when building libgcc2.  Otherwise, winsup must be installed
+# first.
+LIBGCC2_INCLUDES = -I$(srcdir)/../winsup/w32api/include
+
 LIB1ASMSRC = arm/lib1funcs.S
 LIB1ASMFUNCS += _udivsi3 _divsi3 _umodsi3 _modsi3 _dvmd_tls \
 	_clzsi2 _clzdi2 _ctzsi2 \
diff --git a/libgcc/config/i386/cygming-crtbegin.c b/libgcc/config/i386/cygming-crtbegin.c
index d59738bbb34..fc45c6b7c11 100644
--- a/libgcc/config/i386/cygming-crtbegin.c
+++ b/libgcc/config/i386/cygming-crtbegin.c
@@ -35,8 +35,10 @@ see the files COPYING3 and COPYING.RUNTIME respectively.  If not, see
 #include "libgcc_tm.h"
 #include "unwind-dw2-fde.h"
 
+#if DWARF2_UNWIND_INFO
 #define WIN32_LEAN_AND_MEAN
 #include <windows.h>
+#endif
 
 #ifndef LIBGCC_SONAME
 #define LIBGCC_SONAME "libgcc_s.dll"
